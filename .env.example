# AI Legal Ops (SaaS Proxy & Gateway)
# Environment Configuration Example
# Copy this file to .env and replace with your actual keys.

# =============================================================================
# 1. Supabase Configuration (Database & Auth)
# =============================================================================

# Supabase (EU West - Ireland recommended for DSGVO)
# Get your credentials from: https://supabase.com/dashboard/project/_/settings/api
SUPABASE_URL=https://your-project-ref.supabase.co
SUPABASE_KEY=your-anon-key-here
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key-here

# Database URLs (for direct DB access/migrations)
# Transaction pooler (recommended for serverless):
DATABASE_URL=postgresql://postgres.your-project-ref:<PASSWORD>@aws-1-eu-west-1.pooler.supabase.com:6543/postgres?pgbouncer=true
# Direct connection (for migrations):
DIRECT_URL=postgresql://postgres.your-project-ref:<PASSWORD>@aws-1-eu-west-1.pooler.supabase.com:5432/postgres

# =============================================================================
# 2. AI Provider API Keys
# =============================================================================

# Anthropic (Claude) - Primary Provider
# Get key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=sk-ant-api03-ExampleKey...

# Scaleway - Secondary Provider (Optional)
# Get key from: https://console.scaleway.com/
SCALEWAY_API_KEY=scw-ExampleKey...
SCALEWAY_PROJECT_ID=12345678-1234-1234-1234-1234567890ab
SCALEWAY_REGION=fr-par

# OpenAI (Optional - if used for embeddings or fallback)
OPENAI_API_KEY=sk-ExampleKey...

# =============================================================================
# 3. Google Cloud / Vertex AI (DSGVO-Compliant)
# =============================================================================

# GCP Project ID for Vertex AI
# Get from: https://console.cloud.google.com/
GCP_PROJECT_ID=your-project-id

# GCP Region (DSGVO: use EU regions only)
# europe-west3 = Frankfurt (recommended)
# europe-west1 = Belgium
# europe-west4 = Netherlands
GCP_REGION=europe-west3

# Path to Service Account JSON (optional if using gcloud auth)
# Create at: https://console.cloud.google.com/iam-admin/serviceaccounts
GOOGLE_APPLICATION_CREDENTIALS=/path/to/service-account.json

# =============================================================================
# 4. Billing & Payments (Stripe)
# =============================================================================

# Stripe Test Mode Keys
# Get keys from: https://dashboard.stripe.com/test/apikeys
STRIPE_PUBLISHABLE_KEY=pk_test_51Example...
STRIPE_SECRET_KEY=sk_test_51Example...
STRIPE_WEBHOOK_SECRET=whsec_Example...

# =============================================================================
# 5. Application Security & Config
# =============================================================================

# FastAPI Secret Key (for session/JWT encryption)
# Generate with: openssl rand -hex 32
SECRET_KEY=09d25e094faa6ca2556c818166b7a9563b93f7099f6f0f4caa6cf63b88e8d3e7

# Environment (development, staging, production)
# - development: Swagger/ReDoc enabled at /docs and /redoc
# - staging: Swagger/ReDoc enabled (optional)
# - production: Swagger/ReDoc DISABLED for security
ENVIRONMENT=development

# Logging Level (DEBUG, INFO, WARNING, ERROR)
LOG_LEVEL=INFO

# Sentry DSN (for error tracking - Optional)
SENTRY_DSN=https://examplePublicKey@o0.ingest.sentry.io/0

# =============================================================================
# 6. Redis Configuration (Required for Production)
# =============================================================================

# SEC-007: Redis is REQUIRED for production rate limiting
# Without Redis, rate limiting only works per-instance (not distributed)
# Get Redis from: Upstash, Railway, Redis Cloud, or self-hosted
REDIS_URL=redis://localhost:6379/0

# Admin API Key (for admin endpoints)
# Generate with: openssl rand -hex 32
ADMIN_API_KEY=your-admin-api-key-here

# =============================================================================
# 7. CORS Configuration (SEC-015)
# =============================================================================

# Comma-separated list of allowed origins for CORS
# Development: Defaults to localhost:3000, localhost:8000 (+ configured origins)
# Production: ONLY uses explicitly configured origins (no defaults)
# Example: https://app.example.com,https://dashboard.example.com
CORS_ORIGINS=

# Allow credentials (cookies, authorization headers) in CORS requests
# Default: true
CORS_ALLOW_CREDENTIALS=true

# Preflight cache time in seconds (how long browser caches OPTIONS requests)
# Default: 600 (10 minutes)
CORS_MAX_AGE=600

# =============================================================================
# 8. Trusted Proxies (SEC-011: X-Forwarded-For Spoofing Protection)
# =============================================================================

# Comma-separated list of trusted proxy IPs or CIDR ranges
# Only these proxies can set the X-Forwarded-For header
# Required if running behind a reverse proxy (Nginx, Cloudflare, Load Balancer)
# Examples:
#   - Cloudflare IPs: 173.245.48.0/20,103.21.244.0/22 (see: https://www.cloudflare.com/ips/)
#   - AWS Load Balancer: 10.0.0.0/8
#   - Docker bridge network: 172.16.0.0/12
#   - Local reverse proxy: 127.0.0.1,192.168.1.1
# Leave empty if NOT behind a proxy (X-Forwarded-For will be ignored)
TRUSTED_PROXIES=
